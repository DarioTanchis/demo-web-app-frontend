{"ast":null,"code":"import Listings from \"@/components/Listings\";\nimport { useUserStore } from \"@/stores/user\";\nimport { useSearchStore } from \"@/stores/search\";\nimport { storeToRefs } from \"pinia\";\nexport default {\n  name: 'Home',\n  components: {\n    Listings\n  },\n  data() {\n    return {\n      jwt: '',\n      listings: [],\n      searchStore: useSearchStore()\n    };\n  },\n  async created() {\n    this.listings = await this.getListings();\n    await this.searchStore.$subscribe(async (mutation, state) => {\n      console.log('user searched something');\n      console.log(mutation, state);\n      const ls = await this.getListings();\n      console.log(ls);\n      this.listings = ls.filter(l => l.title.includes(state.search));\n      console.log(state.search);\n    });\n  },\n  methods: {\n    async getListings() {\n      const res = await fetch(\"http://localhost:1337/api/listings?populate=images\");\n      const response = await res.json();\n      return response.data;\n    }\n  },\n  mounted() {\n    try {\n      const userStore = useUserStore();\n      this.jwt = userStore.jwt;\n    } catch (err) {}\n  }\n};","map":{"version":3,"names":["Listings","useUserStore","useSearchStore","storeToRefs","name","components","data","jwt","listings","searchStore","created","getListings","$subscribe","mutation","state","console","log","ls","filter","l","title","includes","search","methods","res","fetch","response","json","mounted","userStore","err"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/views/Home.vue"],"sourcesContent":["<template>\n    <Listings v-bind:listingsData=\"this.listings\"/>\n    {{ console.log(this.jwt === undefined || this.jwt === '' ? \"Not logged\" : \"Logged\")  }}\n</template>\n\n<script>\n    import Listings from \"@/components/Listings\"\n    import { useUserStore } from \"@/stores/user\"\n    import { useSearchStore } from \"@/stores/search\"\n    import { storeToRefs } from \"pinia\"\n\n    export default{\n        name: 'Home',\n        components:{\n            Listings,\n        },\n        data(){\n            return{\n                jwt:'',\n                listings: [],\n                searchStore: useSearchStore()\n            }\n        },\n        async created(){\n            this.listings = await this.getListings();\n\n            await this.searchStore.$subscribe(async (mutation, state) => {\n                console.log('user searched something')\n                console.log(mutation, state)\n                \n                const ls = await this.getListings();\n\n                console.log(ls)\n\n                this.listings = ls.filter( l => l.title.includes(state.search))\n                \n                console.log(state.search)\n            })\n        },\n        methods:{\n            async getListings(){\n                const res = await fetch(\"http://localhost:1337/api/listings?populate=images\")\n                \n                const response = await res.json();\n\n                return response.data;\n            },\n        },\n        mounted() {\n            try{\n                const userStore = useUserStore();\n\n                this.jwt = userStore.jwt;\n            }\n            catch(err){\n                \n            }\n        },\n    }\n    \n</script>\n\n<style>\n.mainDiv{\n    position: relative;\n}\n</style>"],"mappings":"AAMI,OAAOA,QAAO,MAAO,uBAAsB;AAC3C,SAASC,YAAW,QAAS,eAAc;AAC3C,SAASC,cAAa,QAAS,iBAAgB;AAC/C,SAASC,WAAU,QAAS,OAAM;AAElC,eAAc;EACVC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAC;IACPL;EACJ,CAAC;EACDM,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,GAAG,EAAC,EAAE;MACNC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAEP,cAAc,CAAC;IAChC;EACJ,CAAC;EACD,MAAMQ,OAAOA,CAAA,EAAE;IACX,IAAI,CAACF,QAAO,GAAI,MAAM,IAAI,CAACG,WAAW,CAAC,CAAC;IAExC,MAAM,IAAI,CAACF,WAAW,CAACG,UAAU,CAAC,OAAOC,QAAQ,EAAEC,KAAK,KAAK;MACzDC,OAAO,CAACC,GAAG,CAAC,yBAAyB;MACrCD,OAAO,CAACC,GAAG,CAACH,QAAQ,EAAEC,KAAK;MAE3B,MAAMG,EAAC,GAAI,MAAM,IAAI,CAACN,WAAW,CAAC,CAAC;MAEnCI,OAAO,CAACC,GAAG,CAACC,EAAE;MAEd,IAAI,CAACT,QAAO,GAAIS,EAAE,CAACC,MAAM,CAAEC,CAAA,IAAKA,CAAC,CAACC,KAAK,CAACC,QAAQ,CAACP,KAAK,CAACQ,MAAM,CAAC;MAE9DP,OAAO,CAACC,GAAG,CAACF,KAAK,CAACQ,MAAM;IAC5B,CAAC;EACL,CAAC;EACDC,OAAO,EAAC;IACJ,MAAMZ,WAAWA,CAAA,EAAE;MACf,MAAMa,GAAE,GAAI,MAAMC,KAAK,CAAC,oDAAoD;MAE5E,MAAMC,QAAO,GAAI,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAEjC,OAAOD,QAAQ,CAACpB,IAAI;IACxB;EACJ,CAAC;EACDsB,OAAOA,CAAA,EAAG;IACN,IAAG;MACC,MAAMC,SAAQ,GAAI5B,YAAY,CAAC,CAAC;MAEhC,IAAI,CAACM,GAAE,GAAIsB,SAAS,CAACtB,GAAG;IAC5B,EACA,OAAMuB,GAAG,EAAC,CAEV;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}