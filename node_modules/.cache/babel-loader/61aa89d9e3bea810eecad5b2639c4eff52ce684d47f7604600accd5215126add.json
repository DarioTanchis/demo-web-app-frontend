{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport { useUserStore } from \"@/stores/user\";\nimport { useSearchStore } from '@/stores/search';\nexport default {\n  name: \"BSNavbar\",\n  data() {\n    return {\n      categories: Array,\n      userStore: Object,\n      isHome: Boolean,\n      isLogin: Boolean,\n      isSignup: Boolean,\n      searchString: '',\n      category: ''\n    };\n  },\n  props: {},\n  watch: {\n    '$route': function (from, to) {\n      console.log(\"new route set\");\n      this.isHome = this.$route.name === 'home';\n      this.isLogin = this.$route.name === 'login';\n      this.isSignup = this.$route.name === 'signup';\n    }\n  },\n  async created() {\n    this.categories = await this.fetchCategories();\n    this.userStore = useUserStore();\n  },\n  methods: {\n    async fetchCategories() {\n      const res = await fetch(\"http://localhost:1337/api/categories\");\n      const data = await res.json();\n      console.log(data);\n      return data.data;\n    },\n    goToLogin(e) {\n      e.preventDefault();\n      router.push({\n        name: 'login'\n      });\n    },\n    goToSignup(e) {\n      e.preventDefault();\n      router.push({\n        name: 'signup'\n      });\n      console.log(\"go to signup\");\n    },\n    goToHome(e) {\n      e.preventDefault();\n      router.push({\n        name: 'home'\n      });\n      console.log(\"go to home\");\n    },\n    logout(e) {\n      e.preventDefault();\n      this.userStore.$patch({\n        jwt: '',\n        name: ''\n      });\n    },\n    Search(e) {\n      e.preventDefault();\n      const searchStore = useSearchStore();\n      searchStore.$patch({\n        search: this.searchString\n      });\n    },\n    CategoryFilter(e, cat) {\n      e.preventDefault();\n      const searchStore = useSearchStore();\n      searchStore.$patch({\n        category: cat\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","useUserStore","useSearchStore","name","data","categories","Array","userStore","Object","isHome","Boolean","isLogin","isSignup","searchString","category","props","watch","$route","from","to","console","log","created","fetchCategories","methods","res","fetch","json","goToLogin","e","preventDefault","push","goToSignup","goToHome","logout","$patch","jwt","Search","searchStore","search","CategoryFilter","cat"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/components/BSNavbar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light\" style=\"background-color: #e3f2fd;\">\n        <!--<a class=\"navbar-brand\">Navbar</a>-->\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        \n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav mr-auto\">\n            <li class=\"nav-item active\">\n                <a class=\"nav-link\" @click=\"goToHome\">Home<span v-if=\"this.isHome\" class=\"sr-only\">(current)</span></a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" @click=\"goToLogin\">Accedi<span v-if=\"this.isLogin\" class=\"sr-only\">(current)</span></a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" @click=\"goToSignup\">Registrati<span v-if=\"this.isSignup\" class=\"sr-only\">(current)</span></a>\n            </li>\n            <li class=\"nav-item dropdown\">\n                <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                Seleziona categoria\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n                    <li v-for=\"c in this.categories\"><a class=\"dropdown-item\" @click=\"CategoryFilter(c.attributes.name)\">{{ c.attributes.name }}</a></li>\n                </ul>\n            </li>\n            <li v-if=\"this.userStore.logged\" class=\"nav-item dropdown\">\n                <a class=\"nav-link dropdown-toggle\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                {{ userStore.name }}\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n                    <li><a class=\"dropdown-item\" @click=\"logout\">Logout</a></li>\n                </ul>\n            </li>\n            </ul>\n            <form v-if=\"isHome\" class=\"form-inline my-2 my-lg-0 search\">\n            <span><input v-model=\"searchString\" class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\"></span>\n            <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\" @click=\"this.Search\">Cerca</button>\n            </form>\n        </div>\n    </nav>\n</template>\n\n<script>\n    import router from '@/router';\n    import { useUserStore } from \"@/stores/user\";\n    import { useSearchStore } from '@/stores/search';\n\n    export default{\n        name:\"BSNavbar\",\n        data(){\n            return{\n                categories: Array,\n                userStore: Object,\n                isHome: Boolean,\n                isLogin: Boolean,\n                isSignup: Boolean,\n                searchString:'',\n                category:''\n            }\n        },\n        props:{\n        },\n        watch: {\n            '$route': function (from, to) {\n                console.log(\"new route set\");\n\n                this.isHome = this.$route.name === 'home';\n                this.isLogin = this.$route.name === 'login';\n                this.isSignup = this.$route.name === 'signup';\n            }   \n        },\n        async created(){\n            this.categories = await this.fetchCategories();\n            this.userStore = useUserStore();\n        },\n        methods:{\n            async fetchCategories(){\n                const res = await fetch(\"http://localhost:1337/api/categories\")\n\n                const data = await res.json();\n\n                console.log(data);\n\n                return data.data;\n            },\n            goToLogin(e){\n                e.preventDefault();\n\n                router.push({name:'login'});\n            },\n            goToSignup(e){\n                e.preventDefault();\n                \n                router.push({name:'signup'})\n\n                console.log(\"go to signup\")\n            },\n            goToHome(e){\n                e.preventDefault();\n                \n                router.push({name:'home'})\n\n                console.log(\"go to home\")\n            },\n            logout(e){\n                e.preventDefault();\n\n                this.userStore.$patch({jwt:'',name:''})\n            },\n            Search(e){\n                e.preventDefault();\n\n                const searchStore = useSearchStore();\n\n                searchStore.$patch({ search:this.searchString });\n            },\n            CategoryFilter(e, cat){\n                e.preventDefault();\n\n                const searchStore = useSearchStore();\n\n                searchStore.$patch({ category:cat });\n            }\n        },\n    }\n</script>\n\n<style>\n    .search{\n        display: flex;\n        flex-direction: row;\n        position: absolute;\n        right: 0;\n        margin-right: 20px;\n    }\n\n    .search > * {\n        margin-right: 10px;\n    }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}