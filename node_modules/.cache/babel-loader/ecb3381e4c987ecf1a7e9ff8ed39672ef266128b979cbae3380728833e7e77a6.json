{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport { RouterLink } from 'vue-router';\nimport { useUserStore } from '@/stores/user';\n\n//per login vuole solo email (o nome utente credo) e psw\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      identifier: \"\",\n      //username or email\n      password: \"\"\n    };\n  },\n  methods: {\n    async login(e) {\n      e.preventDefault();\n      try {\n        const res = await this.axios.post(`http://localhost:1337/api/auth/local`, {\n          identifier: this.email,\n          password: this.password\n        });\n        const {\n          jwt,\n          user\n        } = res.data;\n      } catch (err) {}\n      const loginResponse = await res.json();\n      console.log(loginResponse);\n      if (loginResponse.status === 200) {\n        //200 is the ok status response\n        const userStore = useUserStore();\n        userStore.$patch({\n          jwt: loginResponse.jwt,\n          name: loginResponse.user.username\n        });\n        router.push({\n          name: \"home\"\n        });\n      } else {\n        alert(\"Login non riuscito, credenziali errate\");\n      }\n    },\n    goToSignup(e) {\n      e.preventDefault();\n      router.push({\n        name: \"signup\"\n      });\n    }\n  },\n  components: {\n    RouterLink\n  }\n};","map":{"version":3,"names":["router","RouterLink","useUserStore","name","data","identifier","password","methods","login","e","preventDefault","res","axios","post","email","jwt","user","err","loginResponse","json","console","log","status","userStore","$patch","username","push","alert","goToSignup","components"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/views/Login.vue"],"sourcesContent":["<template>\n    <div id=\"background\">\n        <section class=\"vh-100\" id = \"mysection\">\n            <div class=\"container py-5 h-100\">\n            <div class=\"row d-flex justify-content-center align-items-center h-100\">\n            <div class=\"col col-xl-10\">\n                <div class=\"card\" style=\"border-radius: 1rem;\">\n                <div class=\"row g-0\">\n                    <div class=\"col-md-6 col-lg-5 d-none d-md-block\">\n                    <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/img1.webp\"\n                        alt=\"login form\" class=\"img-fluid\" style=\"border-radius: 1rem 0 0 1rem;\" />\n                    </div>\n                    <div class=\"col-md-6 col-lg-7 d-flex align-items-center\">\n                    <div class=\"card-body p-4 p-lg-5 text-black\">\n\n                        <form>\n\n                        <div class=\"d-flex align-items-center mb-3 pb-1\">\n                            <i class=\"fas fa-cubes fa-2x me-3\" style=\"color: #ff6219;\"></i>\n                            <span class=\"h1 fw-bold mb-0\">Logo</span>\n                        </div>\n\n                        <h5 class=\"fw-normal mb-3 pb-3\" style=\"letter-spacing: 1px;\">Accedi al tuo account</h5>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"identifierInput\">Username/Email</label>\n                            <input type=\"text\" id=\"identifierInput\" class=\"form-control form-control-lg\" \n                            v-model=\"this.identifier\"/>\n                        </div>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"passwordInput\">Password</label>\n                            <input type=\"password\" id=\"passwordInput\" class=\"form-control form-control-lg\" \n                            v-model=\"this.password\"/>\n                        </div>\n\n                        <div class=\"pt-1 mb-4\">\n                            <button class=\"btn btn-dark btn-lg btn-block\" type=\"button\" @click=\"login\">Accedi</button>\n                        </div>\n\n                        <!--<a class=\"small text-muted\" href=\"#!\">Forgot password?</a>-->  \n                        <p class=\"mb-5 pb-lg-2\" style=\"color: #393f81;\">Non sei registrato? <a @click=\"goToSignup\"\n                            style=\"color: #393f81;\">Registrati</a></p>\n                        </form>\n\n                        </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        </section>\n    </div>\n</template>\n\n<script>\n    import router from '@/router'\n    import { RouterLink } from 'vue-router';\n    import { useUserStore } from '@/stores/user'\n\n    //per login vuole solo email (o nome utente credo) e psw\n    export default{\n    name: \"Login\",\n    data() {\n        return {\n            identifier: \"\", //username or email\n            password: \"\",\n        };\n    },\n    methods: {\n        async login(e) {\n            e.preventDefault();\n            \n            try{\n                const res = await this.axios.post(`http://localhost:1337/api/auth/local`, {\n                    identifier: this.email,\n                    password: this.password\n                });\n\n                const { jwt, user } = res.data\n            }\n            catch(err){\n\n            }\n            \n\n            const loginResponse = await res.json();\n            \n            console.log(loginResponse);\n            if(loginResponse.status === 200){ //200 is the ok status response\n                const userStore = useUserStore();\n\n                userStore.$patch({ jwt:loginResponse.jwt, name: loginResponse.user.username })\n                \n                router.push({\n                    name: \"home\",\n                });\n            } else{\n                alert(\"Login non riuscito, credenziali errate\");\n            }\n        },\n        goToSignup(e){\n            e.preventDefault();\n\n            router.push({ name: \"signup\" })\n        }\n    },\n    components: { RouterLink }\n}\n</script>\n\n<style>\n#background{\n    background-color:cornflowerblue;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    padding-bottom: 10rem;\n}\n\n#mycard{\n    width: 10rem;\n}\n</style>"],"mappings":";AAyDI,OAAOA,MAAK,MAAO,UAAS;AAC5B,SAASC,UAAS,QAAS,YAAY;AACvC,SAASC,YAAW,QAAS,eAAc;;AAE3C;AACA,eAAc;EACdC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE,EAAE;MAAE;MAChBC,QAAQ,EAAE;IACd,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,KAAKA,CAACC,CAAC,EAAE;MACXA,CAAC,CAACC,cAAc,CAAC,CAAC;MAElB,IAAG;QACC,MAAMC,GAAE,GAAI,MAAM,IAAI,CAACC,KAAK,CAACC,IAAI,CAAE,sCAAqC,EAAE;UACtER,UAAU,EAAE,IAAI,CAACS,KAAK;UACtBR,QAAQ,EAAE,IAAI,CAACA;QACnB,CAAC,CAAC;QAEF,MAAM;UAAES,GAAG;UAAEC;QAAK,IAAIL,GAAG,CAACP,IAAG;MACjC,EACA,OAAMa,GAAG,EAAC,CAEV;MAGA,MAAMC,aAAY,GAAI,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;MAEtCC,OAAO,CAACC,GAAG,CAACH,aAAa,CAAC;MAC1B,IAAGA,aAAa,CAACI,MAAK,KAAM,GAAG,EAAC;QAAE;QAC9B,MAAMC,SAAQ,GAAIrB,YAAY,CAAC,CAAC;QAEhCqB,SAAS,CAACC,MAAM,CAAC;UAAET,GAAG,EAACG,aAAa,CAACH,GAAG;UAAEZ,IAAI,EAAEe,aAAa,CAACF,IAAI,CAACS;QAAS,CAAC;QAE7EzB,MAAM,CAAC0B,IAAI,CAAC;UACRvB,IAAI,EAAE;QACV,CAAC,CAAC;MACN,OAAM;QACFwB,KAAK,CAAC,wCAAwC,CAAC;MACnD;IACJ,CAAC;IACDC,UAAUA,CAACnB,CAAC,EAAC;MACTA,CAAC,CAACC,cAAc,CAAC,CAAC;MAElBV,MAAM,CAAC0B,IAAI,CAAC;QAAEvB,IAAI,EAAE;MAAS,CAAC;IAClC;EACJ,CAAC;EACD0B,UAAU,EAAE;IAAE5B;EAAW;AAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}