{"ast":null,"code":"import Listings from \"@/components/Listings\";\nimport { useUserStore } from \"@/stores/user\";\nimport { useSearchStore } from \"@/stores/search\";\nimport { storeToRefs } from \"pinia\";\nexport default {\n  name: 'Home',\n  components: {\n    Listings\n  },\n  data() {\n    return {\n      jwt: '',\n      listings: [],\n      searchStore: useSearchStore()\n    };\n  },\n  async created() {\n    this.listings = await this.getListings();\n    await this.searchStore.$subscribe(async (mutation, state) => {});\n  },\n  methods: {\n    async getListings() {\n      const res = await fetch(\"http://localhost:1337/api/listings?populate=images,category\");\n      const response = await res.json();\n      console.log(response);\n      return response.data;\n    },\n    async filterListings(state) {\n      const ls = await this.getListings();\n      console.log(ls[0].attributes.category);\n      this.listings = ls.filter(l => l.attributes.title.includes(state.search) && (state.category === '' || l.attributes.category.data.attributes.name === state.category));\n    }\n  },\n  mounted() {\n    try {\n      const userStore = useUserStore();\n      this.jwt = userStore.jwt;\n    } catch (err) {}\n  }\n};","map":{"version":3,"names":["Listings","useUserStore","useSearchStore","storeToRefs","name","components","data","jwt","listings","searchStore","created","getListings","$subscribe","mutation","state","methods","res","fetch","response","json","console","log","filterListings","ls","attributes","category","filter","l","title","includes","search","mounted","userStore","err"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/views/Home.vue"],"sourcesContent":["<template>\n    <Listings v-bind:listingsData=\"this.listings\"/>\n    {{ console.log(this.jwt === undefined || this.jwt === '' ? \"Not logged\" : \"Logged\")  }}\n</template>\n\n<script>\n    import Listings from \"@/components/Listings\"\n    import { useUserStore } from \"@/stores/user\"\n    import { useSearchStore } from \"@/stores/search\"\n    import { storeToRefs } from \"pinia\"\n\n    export default{\n        name: 'Home',\n        components:{\n            Listings,\n        },\n        data(){\n            return{\n                jwt:'',\n                listings: [],\n                searchStore: useSearchStore()\n            }\n        },\n        async created(){\n            this.listings = await this.getListings();\n\n            await this.searchStore.$subscribe(async (mutation, state) => {\n                \n            })\n        },\n        methods:{\n            async getListings(){\n                const res = await fetch(\"http://localhost:1337/api/listings?populate=images,category\")\n                \n                const response = await res.json();\n\n                console.log(response)\n\n                return response.data;\n            },\n            async filterListings(state){\n                const ls = await this.getListings();\n\n\n                console.log(ls[0].attributes.category)\n\n                this.listings = ls.filter( l => l.attributes.title.includes(state.search) && \n                (state.category === '' || l.attributes.category.data.attributes.name === state.category))\n            }\n        },\n        mounted() {\n            try{\n                const userStore = useUserStore();\n\n                this.jwt = userStore.jwt;\n            }\n            catch(err){\n                \n            }\n        },\n    }\n    \n</script>\n\n<style>\n.mainDiv{\n    position: relative;\n}\n</style>"],"mappings":"AAMI,OAAOA,QAAO,MAAO,uBAAsB;AAC3C,SAASC,YAAW,QAAS,eAAc;AAC3C,SAASC,cAAa,QAAS,iBAAgB;AAC/C,SAASC,WAAU,QAAS,OAAM;AAElC,eAAc;EACVC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAC;IACPL;EACJ,CAAC;EACDM,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,GAAG,EAAC,EAAE;MACNC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAEP,cAAc,CAAC;IAChC;EACJ,CAAC;EACD,MAAMQ,OAAOA,CAAA,EAAE;IACX,IAAI,CAACF,QAAO,GAAI,MAAM,IAAI,CAACG,WAAW,CAAC,CAAC;IAExC,MAAM,IAAI,CAACF,WAAW,CAACG,UAAU,CAAC,OAAOC,QAAQ,EAAEC,KAAK,KAAK,CAE7D,CAAC;EACL,CAAC;EACDC,OAAO,EAAC;IACJ,MAAMJ,WAAWA,CAAA,EAAE;MACf,MAAMK,GAAE,GAAI,MAAMC,KAAK,CAAC,6DAA6D;MAErF,MAAMC,QAAO,GAAI,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAEjCC,OAAO,CAACC,GAAG,CAACH,QAAQ;MAEpB,OAAOA,QAAQ,CAACZ,IAAI;IACxB,CAAC;IACD,MAAMgB,cAAcA,CAACR,KAAK,EAAC;MACvB,MAAMS,EAAC,GAAI,MAAM,IAAI,CAACZ,WAAW,CAAC,CAAC;MAGnCS,OAAO,CAACC,GAAG,CAACE,EAAE,CAAC,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ;MAErC,IAAI,CAACjB,QAAO,GAAIe,EAAE,CAACG,MAAM,CAAEC,CAAA,IAAKA,CAAC,CAACH,UAAU,CAACI,KAAK,CAACC,QAAQ,CAACf,KAAK,CAACgB,MAAM,MACvEhB,KAAK,CAACW,QAAO,KAAM,EAAC,IAAKE,CAAC,CAACH,UAAU,CAACC,QAAQ,CAACnB,IAAI,CAACkB,UAAU,CAACpB,IAAG,KAAMU,KAAK,CAACW,QAAQ,CAAC;IAC5F;EACJ,CAAC;EACDM,OAAOA,CAAA,EAAG;IACN,IAAG;MACC,MAAMC,SAAQ,GAAI/B,YAAY,CAAC,CAAC;MAEhC,IAAI,CAACM,GAAE,GAAIyB,SAAS,CAACzB,GAAG;IAC5B,EACA,OAAM0B,GAAG,EAAC,CAEV;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}