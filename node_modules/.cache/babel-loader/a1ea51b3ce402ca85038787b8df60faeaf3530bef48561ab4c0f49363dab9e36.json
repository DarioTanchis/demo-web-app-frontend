{"ast":null,"code":"import Listings from \"@/components/Listings\";\nimport { useUserStore } from \"@/stores/user\";\nimport { useSearchStore } from \"@/stores/search\";\nimport { storeToRefs } from \"pinia\";\nexport default {\n  name: 'Home',\n  components: {\n    Listings\n  },\n  data() {\n    return {\n      jwt: '',\n      listings: [],\n      searchStore: useSearchStore()\n    };\n  },\n  async created() {\n    this.listings = await this.getListings();\n    await this.searchStore.$subscribe(async (mutation, state) => {\n      const ls = await this.getListings();\n      console.log(ls[0].attributes.category);\n      this.listings = ls.filter(l => l.attributes.title.includes(state.search) && (state.category === '' || l.attributes.category.attributes.name === state.category));\n    });\n  },\n  methods: {\n    async getListings() {\n      const res = await fetch(\"http://localhost:1337/api/listings?populate=images,category\");\n      const response = await res.json();\n      console.log(response);\n      return response.data;\n    }\n  },\n  mounted() {\n    try {\n      const userStore = useUserStore();\n      this.jwt = userStore.jwt;\n    } catch (err) {}\n  }\n};","map":{"version":3,"names":["Listings","useUserStore","useSearchStore","storeToRefs","name","components","data","jwt","listings","searchStore","created","getListings","$subscribe","mutation","state","ls","console","log","attributes","category","filter","l","title","includes","search","methods","res","fetch","response","json","mounted","userStore","err"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/views/Home.vue"],"sourcesContent":["<template>\n    <Listings v-bind:listingsData=\"this.listings\"/>\n    {{ console.log(this.jwt === undefined || this.jwt === '' ? \"Not logged\" : \"Logged\")  }}\n</template>\n\n<script>\n    import Listings from \"@/components/Listings\"\n    import { useUserStore } from \"@/stores/user\"\n    import { useSearchStore } from \"@/stores/search\"\n    import { storeToRefs } from \"pinia\"\n\n    export default{\n        name: 'Home',\n        components:{\n            Listings,\n        },\n        data(){\n            return{\n                jwt:'',\n                listings: [],\n                searchStore: useSearchStore()\n            }\n        },\n        async created(){\n            this.listings = await this.getListings();\n\n            await this.searchStore.$subscribe(async (mutation, state) => {\n                const ls = await this.getListings();\n\n\n                console.log(ls[0].attributes.category)\n\n                this.listings = ls.filter( l => l.attributes.title.includes(state.search) && \n                (state.category === '' || l.attributes.category.attributes.name === state.category))\n            })\n        },\n        methods:{\n            async getListings(){\n                const res = await fetch(\"http://localhost:1337/api/listings?populate=images,category\")\n                \n                const response = await res.json();\n\n                console.log(response)\n\n                return response.data;\n            },\n        },\n        mounted() {\n            try{\n                const userStore = useUserStore();\n\n                this.jwt = userStore.jwt;\n            }\n            catch(err){\n                \n            }\n        },\n    }\n    \n</script>\n\n<style>\n.mainDiv{\n    position: relative;\n}\n</style>"],"mappings":"AAMI,OAAOA,QAAO,MAAO,uBAAsB;AAC3C,SAASC,YAAW,QAAS,eAAc;AAC3C,SAASC,cAAa,QAAS,iBAAgB;AAC/C,SAASC,WAAU,QAAS,OAAM;AAElC,eAAc;EACVC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAC;IACPL;EACJ,CAAC;EACDM,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,GAAG,EAAC,EAAE;MACNC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAEP,cAAc,CAAC;IAChC;EACJ,CAAC;EACD,MAAMQ,OAAOA,CAAA,EAAE;IACX,IAAI,CAACF,QAAO,GAAI,MAAM,IAAI,CAACG,WAAW,CAAC,CAAC;IAExC,MAAM,IAAI,CAACF,WAAW,CAACG,UAAU,CAAC,OAAOC,QAAQ,EAAEC,KAAK,KAAK;MACzD,MAAMC,EAAC,GAAI,MAAM,IAAI,CAACJ,WAAW,CAAC,CAAC;MAGnCK,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CAAC,CAAC,CAACG,UAAU,CAACC,QAAQ;MAErC,IAAI,CAACX,QAAO,GAAIO,EAAE,CAACK,MAAM,CAAEC,CAAA,IAAKA,CAAC,CAACH,UAAU,CAACI,KAAK,CAACC,QAAQ,CAACT,KAAK,CAACU,MAAM,MACvEV,KAAK,CAACK,QAAO,KAAM,EAAC,IAAKE,CAAC,CAACH,UAAU,CAACC,QAAQ,CAACD,UAAU,CAACd,IAAG,KAAMU,KAAK,CAACK,QAAQ,CAAC;IACvF,CAAC;EACL,CAAC;EACDM,OAAO,EAAC;IACJ,MAAMd,WAAWA,CAAA,EAAE;MACf,MAAMe,GAAE,GAAI,MAAMC,KAAK,CAAC,6DAA6D;MAErF,MAAMC,QAAO,GAAI,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAEjCb,OAAO,CAACC,GAAG,CAACW,QAAQ;MAEpB,OAAOA,QAAQ,CAACtB,IAAI;IACxB;EACJ,CAAC;EACDwB,OAAOA,CAAA,EAAG;IACN,IAAG;MACC,MAAMC,SAAQ,GAAI9B,YAAY,CAAC,CAAC;MAEhC,IAAI,CAACM,GAAE,GAAIwB,SAAS,CAACxB,GAAG;IAC5B,EACA,OAAMyB,GAAG,EAAC,CAEV;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}