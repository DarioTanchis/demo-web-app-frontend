{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"background\"\n};\nconst _hoisted_2 = {\n  class: \"vh-100\",\n  id: \"mysection\"\n};\nconst _hoisted_3 = {\n  class: \"container py-5 h-100\"\n};\nconst _hoisted_4 = {\n  class: \"row d-flex justify-content-center align-items-center h-100\"\n};\nconst _hoisted_5 = {\n  class: \"col col-xl-10\"\n};\nconst _hoisted_6 = {\n  class: \"card\",\n  style: {\n    \"border-radius\": \"1rem\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"row g-0\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-6 col-lg-5 d-none d-md-block\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/img1.webp\",\n  alt: \"login form\",\n  class: \"img-fluid\",\n  style: {\n    \"border-radius\": \"1rem 0 0 1rem\"\n  }\n})], -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"col-md-6 col-lg-7 d-flex align-items-center\"\n};\nconst _hoisted_10 = {\n  class: \"card-body p-4 p-lg-5 text-black\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"d-flex align-items-center mb-3 pb-1\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-cubes fa-2x me-3\",\n  style: {\n    \"color\": \"#ff6219\"\n  }\n}), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"h1 fw-bold mb-0\"\n}, \"Logo\")], -1 /* HOISTED */);\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"fw-normal mb-3 pb-3\",\n  style: {\n    \"letter-spacing\": \"1px\"\n  }\n}, \"Creazione account\", -1 /* HOISTED */);\nconst _hoisted_13 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"nameInput\"\n}, \"Nome\", -1 /* HOISTED */);\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"nameFeedback\",\n  class: \"invalid-feedback\"\n}, \" Il campo non può essere vuoto. \", -1 /* HOISTED */);\nconst _hoisted_16 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"usernameInput\"\n}, \"Username\", -1 /* HOISTED */);\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"usernameFeedback\",\n  class: \"invalid-feedback\"\n}, \" Username già registrato o formato scorretto. \", -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"emailInput\"\n}, \"Email\", -1 /* HOISTED */);\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"emailFeedback\",\n  class: \"invalid-feedback\"\n}, \" Email già registrata o formato scorretto. \", -1 /* HOISTED */);\nconst _hoisted_22 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"passwordInput\"\n}, \"Password\", -1 /* HOISTED */);\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"passwordFeedback\",\n  class: \"invalid-feedback\"\n}, \" La password non rispetta i requisiti. \", -1 /* HOISTED */);\nconst _hoisted_25 = {\n  class: \"pt-1 mb-4\"\n};\nconst _hoisted_26 = {\n  class: \"mb-5 pb-lg-2\",\n  style: {\n    \"color\": \"#393f81\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"form\", {\n    class: _normalizeClass(this.submitted ? 'was-validated' : '')\n  }, [_hoisted_11, _hoisted_12, _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"nameInput\",\n    \"aria-describedby\": \"nameFeedback\",\n    class: _normalizeClass([\"form-control form-control-lg\", this.submitted ? this.name.length === 0 ? 'is-invalid' : 'is-valid' : '']),\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => this.name = $event)\n  }, null, 2 /* CLASS */), [[_vModelText, this.name]]), _hoisted_15]), _createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"usernameInput\",\n    \"aria-describedby\": \"usernameFeedback\",\n    class: _normalizeClass([\"form-control form-control-lg\", this.submitted ? this.usernameError === true ? 'is-invalid' : 'is-valid' : '']),\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => this.username = $event)\n  }, null, 2 /* CLASS */), [[_vModelText, this.username]]), _hoisted_18]), _createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _withDirectives(_createElementVNode(\"input\", {\n    type: \"\",\n    id: \"emailInput\",\n    \"aria-describedby\": \"emailFeedback\",\n    class: _normalizeClass([\"form-control form-control-lg\", this.submitted ? this.emailError === true ? 'is-invalid' : 'is-valid' : '']),\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => this.email = $event)\n  }, null, 2 /* CLASS */), [[_vModelText, this.email]]), _hoisted_21]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"passwordInput\",\n    \"aria-describedby\": \"passwordFeedback\",\n    class: _normalizeClass([\"form-control form-control-lg\", this.submitted ? this.passwordError === true ? 'is-invalid' : 'is-valid' : '']),\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => this.password = $event)\n  }, null, 2 /* CLASS */), [[_vModelText, this.password]]), _hoisted_24]), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"button\", {\n    class: \"btn btn-dark btn-lg btn-block\",\n    type: \"button\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.registerUser && $options.registerUser(...args))\n  }, \"Registrati\")]), _createCommentVNode(\"<a class=\\\"small text-muted\\\" href=\\\"#!\\\">Forgot password?</a>\"), _createElementVNode(\"p\", _hoisted_26, [_createTextVNode(\"Sei già registrato? \"), _createElementVNode(\"a\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.goToLogin && $options.goToLogin(...args)),\n    style: {\n      \"color\": \"#393f81\"\n    }\n  }, \"Accedi\")])], 2 /* CLASS */)])])])])])])])])]);\n}","map":{"version":3,"names":["id","class","style","_createElementVNode","src","alt","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_normalizeClass","submitted","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","type","name","length","$event","_hoisted_15","_hoisted_16","_hoisted_17","usernameError","username","_hoisted_18","_hoisted_19","_hoisted_20","emailError","email","_hoisted_21","_hoisted_22","_hoisted_23","passwordError","password","_hoisted_24","_hoisted_25","onClick","_cache","args","$options","registerUser","_createCommentVNode","_hoisted_26","goToLogin"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-tirocinio/frontend/src/views/Signup.vue"],"sourcesContent":["<template>\n    <div id=\"background\">\n        <section class=\"vh-100\" id = \"mysection\">\n            <div class=\"container py-5 h-100\">\n            <div class=\"row d-flex justify-content-center align-items-center h-100\">\n            <div class=\"col col-xl-10\">\n                <div class=\"card\" style=\"border-radius: 1rem;\">\n                <div class=\"row g-0\">\n                    <div class=\"col-md-6 col-lg-5 d-none d-md-block\">\n                    <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/img1.webp\"\n                        alt=\"login form\" class=\"img-fluid\" style=\"border-radius: 1rem 0 0 1rem;\" />\n                    </div>\n                    <div class=\"col-md-6 col-lg-7 d-flex align-items-center\">\n                    <div class=\"card-body p-4 p-lg-5 text-black\">\n\n                        <form :class=\"this.submitted ? 'was-validated':''\">\n\n                        <div class=\"d-flex align-items-center mb-3 pb-1\">\n                            <i class=\"fas fa-cubes fa-2x me-3\" style=\"color: #ff6219;\"></i>\n                            <span class=\"h1 fw-bold mb-0\">Logo</span>\n                        </div>\n\n                        <h5 class=\"fw-normal mb-3 pb-3\" style=\"letter-spacing: 1px;\">Creazione account</h5>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"nameInput\">Nome</label>\n                            <input type=\"text\" id=\"nameInput\" aria-describedby=\"nameFeedback\" class=\"form-control form-control-lg\" \n                            :class=\"this.submitted ? (this.name.length === 0 ? 'is-invalid' : 'is-valid') : ''\" v-model=\"this.name\"/>\n                            <div id=\"nameFeedback\" class=\"invalid-feedback\">\n                                Il campo non può essere vuoto.\n                            </div>\n                        </div>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"usernameInput\">Username</label>\n                            <input type=\"text\" id=\"usernameInput\" aria-describedby=\"usernameFeedback\" class=\"form-control form-control-lg\" \n                            :class=\"this.submitted ? (this.usernameError === true ? 'is-invalid' : 'is-valid') : '' \" v-model=\"this.username\"/>\n                            <div id=\"usernameFeedback\" class=\"invalid-feedback\">\n                                Username già registrato o formato scorretto.\n                            </div>\n                        </div>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"emailInput\">Email</label>\n                            <input type=\"\" id=\"emailInput\" aria-describedby=\"emailFeedback\" class=\"form-control form-control-lg\" \n                            :class=\"this.submitted ? (this.emailError === true ? 'is-invalid' : 'is-valid') : ''\" v-model=\"this.email\"/>\n                            <div id=\"emailFeedback\" class=\"invalid-feedback\">\n                                Email già registrata o formato scorretto.\n                            </div>\n                        </div>\n\n                        <div class=\"form-outline mb-4\">\n                            <label class=\"form-label\" for=\"passwordInput\">Password</label>\n                            <input type=\"password\" id=\"passwordInput\" aria-describedby=\"passwordFeedback\" class=\"form-control form-control-lg\" \n                            :class=\"this.submitted ? (this.passwordError === true ? 'is-invalid' : 'is-valid'):''\" v-model=\"this.password\"/>\n                            <div id=\"passwordFeedback\" class=\"invalid-feedback\">\n                                La password non rispetta i requisiti.\n                            </div>\n                        </div>\n\n                        <div class=\"pt-1 mb-4\">\n                            <button class=\"btn btn-dark btn-lg btn-block\" type=\"button\" @click=\"registerUser\">Registrati</button>\n                        </div>\n\n                        <!--<a class=\"small text-muted\" href=\"#!\">Forgot password?</a>--> \n                        <p class=\"mb-5 pb-lg-2\" style=\"color: #393f81;\">Sei già registrato? <a @click=\"goToLogin\"\n                            style=\"color: #393f81;\">Accedi</a></p>\n                        </form>\n\n                        </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        </section>\n    </div>\n    \n</template>\n\n<script>\n    import router from '@/router';\n    import { RouterLink } from 'vue-router';\n    import { useUserStore } from '@/stores/user'\n\n    export default{\n        name:'Signup',\n        data(){\n            return{\n                name: '',\n                email: '',\n                password: '',\n                username: '',\n                emailError: false,\n                usernameError: false,\n                passwordError: false,\n                submitted: false\n            }\n        },\n        methods:{\n            async registerUser(e){\n                e.preventDefault();\n\n                const user = {\n                    name:this.name,\n                    email:this.email,\n                    password:this.password,\n                    username:this.username\n                }\n\n                console.log(JSON.stringify(user));\n                \n                const requestOptions = {\n                    method: 'POST',\n                    headers: { 'Content-type': 'application/json' },\n                    body: JSON.stringify(user)\n                };\n\n                try{\n                    const res = await fetch('http://localhost:1337/api/auth/local/register', requestOptions);\n                \n                    if(res.ok){\n                        const data = await res.json()\n\n                        const userStore = useUserStore();\n\n                        userStore.$patch({ jwt:loginResponse.jwt, name: loginResponse.user.username })        \n\n                        router.push({\n                            name:\"home\",\n                        })\n                    }else{\n                        alert(\"Errore nella registrazione\")\n                        \n                        const data = await res.json()\n\n                        const errors = data.error.details.errors;\n\n                        this.passwordError = false;\n                        this.emailError = false;\n                        this.usernameError = false;\n\n                        console.log(errors.length)\n                        for(let i = 0; i < errors.length; i++){\n                            this.passwordError = this.passwordError || (errors[i].path.length > 0 && errors[i].path.indexOf('password') !== -1); //If the error is not set already and it is found in the path of the received errors\n                            this.emailError = this.emailError || (errors[i].path.length > 0 && errors[i].path.indexOf('email') !== -1); \n                            this.usernameError = this.usernameError || (errors[i].path.length > 0 && errors[i].path.indexOf('username') !== -1); \n                        }\n\n                        this.submitted = true;\n                    }\n                }\n                catch(err){\n                    console.log(err)\n                }\n\n            },\n            goToLogin(e){\n                e.preventDefault();\n\n                router.push({ name: \"login\" })\n            }\n        }\n    }\n</script>\n\n<style>\n#background{\n    background-color:cornflowerblue;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    padding-bottom: 10rem;\n}\n\n#mycard{\n    width: 10rem;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}