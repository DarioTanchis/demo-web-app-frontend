{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Insert Listing\",\n  data() {\n    return {\n      imageIndex: 0,\n      listing: {\n        title: '',\n        descriprion: '',\n        price: 0,\n        phone: '',\n        email: '',\n        imagesUrl: [],\n        category: -1\n      },\n      images: [],\n      imagesUrls: []\n    };\n  },\n  methods: {\n    nextImage(e) {\n      e.preventDefault();\n      const carouselItems = document.getElementsByClassName(\"carousel-item\");\n      this.imageIndex = (this.imageIndex + 1) % carouselItems.length;\n    },\n    prevImage(e) {\n      e.preventDefault();\n      const carouselItems = document.getElementsByClassName(\"carousel-item\");\n      this.imageIndex = (this.imageIndex - 1) % carouselItems.length;\n    },\n    setImages(e) {\n      e.preventDefault();\n      const reader = new FileReader();\n      let images = Array.from(e.target.files);\n      images = images.filter(f => f['type'] === 'image/jpeg' || f['type'] === 'image/png'); //filters file that are not images\n\n      this.images = images;\n      console.log(this.images);\n\n      // FileReader support\n      if (FileReader && files && files.length) {\n        var fr = new FileReader();\n        fr.onload = function () {\n          document.getElementById(outImage).src = fr.result;\n        };\n      }\n      this.imagesUrls = [];\n      Object.keys(images).forEach(i => {\n        const file = files[i];\n        const reader = new FileReader();\n        reader.onload = e => {\n          //server call for uploading or reading the files one-by-one\n          //by using 'reader.result' or 'file'\n        };\n        reader.readAsDataURL(file);\n        this.imagesUrls.push(reader.result);\n      });\n      this.imagesUrls = this.images.map(i => fr.readAsDataURL(i)); //maps from file to file url\n      console.log(this.imagesUrls);\n    },\n    async submit(e) {\n      console.log(e.target);\n      await fetch('/api/upload', {\n        method: 'post',\n        body: new FormData(e.target)\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","imageIndex","listing","title","descriprion","price","phone","email","imagesUrl","category","images","imagesUrls","methods","nextImage","e","preventDefault","carouselItems","document","getElementsByClassName","length","prevImage","setImages","reader","FileReader","Array","from","target","files","filter","f","console","log","fr","onload","getElementById","outImage","src","result","Object","keys","forEach","i","file","readAsDataURL","push","map","submit","fetch","method","body","FormData"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/views/InsertListing.vue"],"sourcesContent":["<template>\n    <main>\n        <div class=\"container align-items-start\">\n            <div class=\"card\" style=\"width: 40rem;\">\n                <div class=\"card-body\">\n                    <form style=\"\">\n                        <div class=\"form-group mb-3\">\n                            <label for=\"formTitle\" class=\"form-label\">Titolo</label>\n                            <input class=\"form-control\" type=\"text\" id=\"formTitle\" multiple>\n                        </div>\n\n                        <div v-if=\"this.images !== undefined && this.images.length > 0\" \n                        id=\"carouselExampleControls\" class=\"carousel slide\" data-ride=\"carousel\">\n                            <div v-for=\"(img, index) in this.imagesUrls\" class=\"carousel-inner\">\n                                <div class=\"carousel-item\" :class=\" index === this.imageIndex ? 'active' : ''\">\n                                    <img class=\"d-block card-img-top\" :src=\"img\">\n                                </div>\n                            </div>\n                            <a v-if=\"this.listing.imagesUrl.length > 1\" class=\"carousel-control-prev\" @click=\"prevImage\" role=\"button\" data-slide=\"prev\">\n                                <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"sr-only\">Previous</span>\n                            </a>\n                            <a v-if=\"this.listing.imagesUrl.length > 1\" class=\"carousel-control-next\" @click=\"nextImage\" role=\"button\" data-slide=\"next\">\n                                <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                                <span class=\"sr-only\">Next</span>\n                            </a>\n                        </div>\n                        <div class=\"form-group mb-3\">\n                            <label for=\"formFileMultiple\" class=\"form-label\">Foto</label>\n                            <input class=\"form-control\" type=\"file\"  accept=\".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*\" \n                            id=\"formFileMultiple\" @change=\"setImages\" multiple>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label class=\"form-label\" for=\"formDescription\">Descrizione</label> \n                            <textarea class=\"form-control\" type=\"text\" id=\"formDescription\" rows=\"8\"  multiple></textarea>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </main>\n</template>\n\n<script>\n    export default{\n        name: \"Insert Listing\",\n        data(){\n            return{\n                imageIndex:0,\n                listing:{\n                    title:'',\n                    descriprion:'',\n                    price:0,\n                    phone:'',\n                    email:'',\n                    imagesUrl:[],\n                    category:-1\n                },\n                images:[],\n                imagesUrls:[]\n            }\n        },\n        methods: {\n            nextImage(e){\n                e.preventDefault();\n\n                const carouselItems = document.getElementsByClassName(\"carousel-item\");\n\n                this.imageIndex = (this.imageIndex + 1) % carouselItems.length;\n            },\n            prevImage(e){\n                e.preventDefault();\n\n                const carouselItems = document.getElementsByClassName(\"carousel-item\");\n\n                this.imageIndex = (this.imageIndex - 1) % carouselItems.length;\n            },\n            setImages(e){\n                e.preventDefault();\n\n                const reader = new FileReader();\n\n                let images = Array.from(e.target.files);\n\n                images = images.filter( f => f['type'] === 'image/jpeg' || f['type'] === 'image/png' )  //filters file that are not images\n\n                this.images = images\n\n                console.log(this.images)\n\n                // FileReader support\n                if (FileReader && files && files.length) {\n                    var fr = new FileReader();\n                    fr.onload = function () {\n                        document.getElementById(outImage).src = fr.result;\n                    }\n                    \n                    \n                }\n\n                this.imagesUrls = []\n                Object.keys(images).forEach(i => {\n                    const file = files[i];\n                    const reader = new FileReader();\n                    reader.onload = (e) => {\n                    //server call for uploading or reading the files one-by-one\n                    //by using 'reader.result' or 'file'\n                    }\n                    reader.readAsDataURL(file);\n\n                    this.imagesUrls.push(reader.result)\n                });\n\n                this.imagesUrls = this.images.map( i => fr.readAsDataURL(i))   //maps from file to file url\n                console.log(this.imagesUrls)\n            },\n            async submit(e){\n                console.log(e.target)\n\n                await fetch('/api/upload', {\n                method: 'post',\n                body: new FormData(e.target)\n                });\n            }\n        }\n    }\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}