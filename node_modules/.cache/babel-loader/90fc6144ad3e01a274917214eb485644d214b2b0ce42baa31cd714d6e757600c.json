{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport { useUserStore } from \"@/stores/user\";\nimport { useSearchStore } from '@/stores/search';\nimport { useCategoriesStore } from '@/stores/categories';\nexport default {\n  name: \"BSNavbar\",\n  data() {\n    return {\n      categories: Array,\n      userStore: Object,\n      isHome: Boolean,\n      isLogin: Boolean,\n      isSignup: Boolean,\n      isInsertListing: Boolean,\n      searchString: '',\n      category: '',\n      searchStore: ''\n    };\n  },\n  props: {},\n  watch: {\n    '$route': function (from, to) {\n      console.log(\"new route set\");\n      this.isHome = this.$route.name === 'home';\n      this.isLogin = this.$route.name === 'login';\n      this.isSignup = this.$route.name === 'signup';\n      this.isInsertListing = this.$route.name === 'insertListing';\n    }\n  },\n  async created() {\n    this.categories = await this.fetchCategories();\n    console.log(this.categories);\n    useCategoriesStore().$patch({\n      categories: this.categories\n    });\n    this.userStore = useUserStore();\n    this.searchStore = useSearchStore();\n    this.searchString = this.searchStore.search;\n    this.category = this.searchStore.category;\n  },\n  methods: {\n    async fetchCategories() {\n      const res = await fetch(\"http://localhost:1337/api/categories\");\n      const data = await res.json();\n      console.log(data);\n      return data.data;\n    },\n    goToLogin(e) {\n      e.preventDefault();\n      router.push({\n        name: 'login'\n      });\n    },\n    goToSignup(e) {\n      e.preventDefault();\n      router.push({\n        name: 'signup'\n      });\n      console.log(\"go to signup\");\n    },\n    goToHome(e) {\n      e.preventDefault();\n      router.push({\n        name: 'home'\n      });\n      console.log(\"go to home\");\n    },\n    logout(e) {\n      e.preventDefault();\n      this.userStore.$patch({\n        jwt: '',\n        name: ''\n      });\n    },\n    Search(e) {\n      e.preventDefault();\n      const searchStore = useSearchStore();\n      searchStore.$patch({\n        search: this.searchString\n      });\n    },\n    CategoryFilter(e, cat) {\n      e.preventDefault();\n      this.category = cat;\n      const searchStore = useSearchStore();\n      searchStore.$patch({\n        category: cat\n      });\n    },\n    InsertListing(e) {\n      e.preventDefault();\n      this.$router.push({\n        name: \"insertListing\"\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","useUserStore","useSearchStore","useCategoriesStore","name","data","categories","Array","userStore","Object","isHome","Boolean","isLogin","isSignup","isInsertListing","searchString","category","searchStore","props","watch","$route","from","to","console","log","created","fetchCategories","$patch","search","methods","res","fetch","json","goToLogin","e","preventDefault","push","goToSignup","goToHome","logout","jwt","Search","CategoryFilter","cat","InsertListing","$router"],"sources":["/home/dario/Documenti/GitHub/demo-web-app-frontend/src/components/BSNavbar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light\" style=\"background-color: #e3f2fd;\">\n        <!--<a class=\"navbar-brand\">Navbar</a>-->\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" \n        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        \n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav mr-auto\">\n                <li class=\"nav-item active\">\n                    <a class=\"nav-link\" @click=\"goToHome\">Home<span v-if=\"this.isHome\" class=\"sr-only\">(current)</span></a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" @click=\"goToLogin\">Accedi<span v-if=\"this.isLogin\" class=\"sr-only\">(current)</span></a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" @click=\"goToSignup\">Registrati<span v-if=\"this.isSignup\" class=\"sr-only\">(current)</span></a>\n                </li>\n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    {{ this.category === '' ? 'Seleziona categoria' : this.category }}\n                    </a>\n                    <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n                        <li v-for=\"c in this.categories\"><a class=\"dropdown-item\" @click=\"CategoryFilter($event, c.attributes.name)\">{{ c.attributes.name }}</a></li>\n                        <li v-if=\"this.category !== ''\"><a class=\"dropdown-item\" @click=\"CategoryFilter($event, '')\"> Nessun categoria</a></li>\n                    </ul>\n                </li>\n                <li v-if=\"this.userStore.logged\" class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    {{ userStore.name }}\n                    </a>\n                    <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n                        <li><a class=\"dropdown-item\" @click=\"logout\">Logout</a></li>\n                    </ul>\n                </li>\n            </ul>   \n        \n            <div class=\"navbar-collapse collapse w-100 order-3\">\n                <ul class=\"navbar-nav ml-auto\">\n                    <li v-if=\"isInsertListing === false\" class=\"nav-item\">\n                        <button v-if=\"isInsertListing === false\" type=\"button\" class=\"btn btn-danger\" @click=\"InsertListing\">Inserisci annuncio</button>\n                    </li>\n                    <li class=\"nav-item\">\n                        <form v-if=\"isHome\" class=\"form-inline my-2 my-lg-0 search\">\n                        <span><input v-model=\"searchString\" class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\"></span>\n                        <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\" @click=\"this.Search\">Cerca</button>\n                        </form>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </nav>\n</template>\n\n<script>\n    import router from '@/router';\n    import { useUserStore } from \"@/stores/user\";\n    import { useSearchStore } from '@/stores/search';\n    import { useCategoriesStore } from '@/stores/categories'\n\n    export default{\n        name:\"BSNavbar\",\n        data(){\n            return{\n                categories: Array,\n                userStore: Object,\n                isHome: Boolean,\n                isLogin: Boolean,\n                isSignup: Boolean,\n                isInsertListing: Boolean,\n                searchString:'',\n                category:'',\n                searchStore:''\n            }\n        },\n        props:{\n        },\n        watch: {\n            '$route': function (from, to) {\n                console.log(\"new route set\");\n\n                this.isHome = this.$route.name === 'home';\n                this.isLogin = this.$route.name === 'login';\n                this.isSignup = this.$route.name === 'signup';\n                this.isInsertListing = this.$route.name === 'insertListing'\n            }   \n        },\n        async created(){\n            this.categories = await this.fetchCategories();\n            \n            console.log(this.categories)\n            useCategoriesStore().$patch( {categories: this.categories} )\n\n            this.userStore = useUserStore();\n            this.searchStore = useSearchStore();\n\n            this.searchString = this.searchStore.search;\n            this.category = this.searchStore.category;\n        },\n        methods:{\n            async fetchCategories(){\n                const res = await fetch(\"http://localhost:1337/api/categories\")\n\n                const data = await res.json();\n\n                console.log(data);\n\n                return data.data;\n            },\n            goToLogin(e){\n                e.preventDefault();\n\n                router.push({name:'login'});\n            },\n            goToSignup(e){\n                e.preventDefault();\n                \n                router.push({name:'signup'})\n\n                console.log(\"go to signup\")\n            },\n            goToHome(e){\n                e.preventDefault();\n                \n                router.push({name:'home'})\n\n                console.log(\"go to home\")\n            },\n            logout(e){\n                e.preventDefault();\n\n                this.userStore.$patch({jwt:'',name:''})\n            },\n            Search(e){\n                e.preventDefault();\n\n                const searchStore = useSearchStore();\n\n                searchStore.$patch({ search:this.searchString });\n            },\n            CategoryFilter(e, cat){\n                e.preventDefault();\n\n                this.category = cat\n\n                const searchStore = useSearchStore();\n\n                searchStore.$patch({ category:cat });\n            },\n            InsertListing(e){\n                e.preventDefault();\n\n                this.$router.push( { name:\"insertListing\" } )\n            }\n        },\n    }\n</script>\n\n<style>\n    .search{\n        display: flex;\n        flex-direction: row;\n        position: absolute;\n        right: 0;\n        margin-right: 20px;\n    }\n\n    .search > * {\n        margin-right: 10px;\n    }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}